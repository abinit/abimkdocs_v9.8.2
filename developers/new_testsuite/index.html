
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Design of the new YAML-based test suite.">
      
      
      
        <meta name="author" content="The Abinit group">
      
      
        <link rel="canonical" href="https://docs.abinit.org/developers/new_testsuite/">
      
      <link rel="icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.6">
    
    
      
        <title>YAML-based test suite Howto - abinit</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2c0c5eaf.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.7fa14f5b.min.css">
        
          
          
          <meta name="theme-color" content="#ff6e42">
        
      
    
    
    

    <!-- 
    IMPORTANT: Don't use boostrap in particular boostrap.css since it comes into conflict with mkdocs-material theme.
    Prefer low-level tools based on Jquery or JS library such as Tippyjs to get the work done.
    -->

    <!-- Jquery from Google CDN -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Load Jquery UI -->
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <!-- Handle jQuery plugin naming conflict between jQuery UI and Bootstrap
    https://stackoverflow.com/questions/13731400/jqueryui-tooltips-are-competing-with-twitter-bootstrap
    <script>
      $.widget.bridge('uibutton', $.ui.button);
      $.widget.bridge('uitooltip', $.ui.tooltip);
    </script>
    -->

    <!-- jQuery Modal -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />

    <!-- Tippyjs for popovers https://atomiks.github.io/tippyjs/ -->
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>

    <!-- font-awesome -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    <!--Pace support. http://github.hubspot.com/pace/ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/white/pace-theme-big-counter.min.css" />

    <script>
        paceOptions = {
            ajax: true,      // disabled
            document: true,  // activated
            eventLag: false  // disabled
            //target: 'article'
            //elements: {selectors: ['.my-page']}
        };
    </script>

    <!-- MathJax support
    <script type="text/javascript" async 
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script> 
    -->

    <!-- This version is compatible with plotly. -->
    <script type="text/javascript" async 
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_SVG">
    </script> 

    <!-- Configure MathJax to produce automatic equation numbers http://docs.mathjax.org/en/latest/tex.html -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        //jax: ["input/TeX","output/HTML-CSS"],
        //tex2jax: {inlineMath: [['$','$']]},
        //displayAlign: "center",
        TeX: {
            equationNumbers: { autoNumber: "AMS" },
            extensions: ["AMSmath.js", "boldsymbol.js"],
            Macros: {
                "*": "{\\dagger}",
                "ra": "{\\rangle}",
                "la": "{\\langle}",
                // Workaround for bm package. See https://github.com/mathjax/MathJax/issues/1219
                bm: ["{\\boldsymbol #1}",1],
                // Mathcal symbols
                mcL: "{\\mathcal{L}}",
                mcG: "{\\mathcal{G}}",
                mcR: "{\\mathcal{R}}",
                mcS: "{\\mathcal{S}}",
                mcC: "{\\mathcal{C}}",
                mcO: "{\\mathcal{O}}",
                // Acronyms
                KS: "{\\text{KS}}",
                eph: "{\\text{e-ph}}",
                ee: "{\\text{e-e}}",
                phph: "{\\text{ph-ph}}",
                FM: "{\\text{FM}}",
                DW: "{\\text{DW}}",
                QP: "{\\text{QP}}",
                BZ: "{\\text{BZ}}",
                sign: "{\\text{sign}}",
                xc: "{\\text{xc}}",
                tchi: "{\\tilde\\chi}",
                // Symbols commonly used (k-points, eigenvalues ...)
                rr: "{\\bf r}",
                RR: "{\\bf R}",
                tt: "{\\bf t}",
                GG: "{\\bf G}",
                kk: "{\\bf k}",
                qq: "{\\bf q}",
                kq: "{\\kk + \\qq}",
                qG: "{\\bf q + G}",
                kG: "{\\bf k + G}",
                kmq: "{\\kk - \\qq}",
                kpq: "{\\kk + \\qq}",
                kpG: "{\\kk + \\GG}",
                qpG: "{\\qq + \\GG}",
                nk: "{n \\kk}",
                mk: "{, \\kk}",
                nks: "{n \\kk\\sigma}",
                mks: "{m \\kk\\sigma}",
                enk: "{\\varepsilon_\\nk}",
                emkq: "{\\varepsilon_{m\\kk+\\qq}}",
                qnu: "{\\qq \\nu}",
                wqnu: "{\\omega_{\\qnu}}",
                vnk: "{\\mathbf{v}_{n\\kk}}",
                vmkq: "{\\mathbf{v}_{m\\kk+\\qq}}",
                vnka: "{\\mathrm{v}_{n\\kk,\\alpha}}",
                vnkb: "{\\mathrm{v}_{n\\kk,\\beta}}",
                ef: "{\\varepsilon_F}",
                // EPH quantities
                gkkp: "{g_{mn\\nu}(\\kk,\\qq)}",
                gkq: "{g_{mn\\nu}(\\kk,\\qq)}",
                //\newcommand{\gkkpL}{g_{mn\nu}^\Lc(\kb,\qb)}
                // Many-body theory
                Go: "{G_0}",
                Wo: "{W_0}",
                Ueff: "{U_{\\text{eff}}}",
                // Greek symbols + tilde version
                ee: "{\\epsilon}",
                tee: "{\\tilde{\\epsilon}}",
                ww: "{\\omega}",
                tww: "{\\tilde\\omega}",
                dd: "{\\,\\text{d}}",
                vxc: "{v_\\xc}",
                // symrel
                Ri: "{\\mcR^{-1}}",
                Rit: "{\\mcR^{-1\\tau}}",
                // symrec
                Si: "{\\mcS^{-1}}}",
                Sit: "{\\Si^\\tau}}",
                // partial and functional derivative.
                PDER: ["{\\dfrac{\\partial #1}{\\partial #2}}", 2],
                FDER: ["{\\dfrac{\\delta #1}{\\delta #2}}", 2],
                // PAW
                tPsi: "{\\tilde\\Psi}",
                tpsi: "{\\tilde\\psi}",
                tPhi: "{\\tilde\\Phi}",
                tphi: "{\\tilde\\phi}",
                tprj: "{\\tilde p}"
            }
          }
      });
    </script>

    

    

    <!-- Load fonts used for input variables -->
    <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">

    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
      <link rel="stylesheet" href="../../css/gallery.css">
    
      <link rel="stylesheet" href="../../css/my_codehilite.css">
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-116681470-1","docs.abinit.org"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="deep-orange" data-md-color-accent="deep-orange">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#yaml-based-tests-design-principles-and-implementation-details" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="abinit" class="md-header__button md-logo" aria-label="abinit" data-md-component="logo">
      
  <img src="../../images/logo-abinit-2015.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            abinit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              YAML-based test suite Howto
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/abinit/abinit/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    github-abinit
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        User Guides
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../topics/features/" class="md-tabs__link">
        Topics
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../variables/" class="md-tabs__link">
        Variables
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../tutorial/" class="md-tabs__link">
        Tutorials
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../faq/configuration_and_compilation/" class="md-tabs__link">
        FAQ
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../theory/geometry/" class="md-tabs__link">
        Theory
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../git_and_gitlab/" class="md-tabs__link md-tabs__link--active">
        Developers
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../about/release-notes/" class="md-tabs__link">
        About
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="abinit" class="md-nav__button md-logo" aria-label="abinit" data-md-component="logo">
      
  <img src="../../images/logo-abinit-2015.png" alt="logo">

    </a>
    abinit
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/abinit/abinit/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    github-abinit
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      <label class="md-nav__link" for="__nav_1">
        User Guides
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="User Guides" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          User Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        NewUser
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/abinit/" class="md-nav__link">
        Abinit
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/aim/" class="md-nav__link">
        Aim
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/anaddb/" class="md-nav__link">
        Anaddb
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/atdep/" class="md-nav__link">
        aTDEP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/cut3d/" class="md-nav__link">
        Cut3d
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/fold2bloch/" class="md-nav__link">
        Fold2Bloch
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/mrgddb/" class="md-nav__link">
        Mrgddb
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/mrgscr/" class="md-nav__link">
        Mrgscr
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/multibinit/" class="md-nav__link">
        Multibinit
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/optic/" class="md-nav__link">
        Optic
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/respfn/" class="md-nav__link">
        Respfn
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/spacegroup/" class="md-nav__link">
        Spacegroup
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_14" type="checkbox" id="__nav_1_14" >
      
      <label class="md-nav__link" for="__nav_1_14">
        Installation
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Installation" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_14">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        HowTo
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../INSTALL_MacOS/" class="md-nav__link">
        MacOS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../INSTALL_Ubuntu/" class="md-nav__link">
        Ubuntu
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../INSTALL_CentOS/" class="md-nav__link">
        CentOS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../INSTALL_EasyBuild/" class="md-nav__link">
        EasyBuild
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../INSTALL_gpu/" class="md-nav__link">
        GPUs
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Topics
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Topics" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Topics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/features/" class="md-nav__link">
        Features
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/" class="md-nav__link">
        Topic List
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Abipy/" class="md-nav__link">
        Abipy
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/APPA/" class="md-nav__link">
        APPA
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Artificial/" class="md-nav__link">
        Artificial
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/AtomManipulator/" class="md-nav__link">
        AtomManipulator
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/aTDEP/" class="md-nav__link">
        aTDEP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/AtomTypes/" class="md-nav__link">
        AtomTypes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Bader/" class="md-nav__link">
        Bader
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Band2eps/" class="md-nav__link">
        Band2eps
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Berry/" class="md-nav__link">
        Berry
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/BandOcc/" class="md-nav__link">
        BandOcc
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/BSE/" class="md-nav__link">
        BSE
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/BoundingProcess/" class="md-nav__link">
        BoundingProcess
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/ConstrainedDFT/" class="md-nav__link">
        ConstrainedDFT
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/ConstrainedPol/" class="md-nav__link">
        ConstrainedPol
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Control/" class="md-nav__link">
        Control
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Coulomb/" class="md-nav__link">
        Coulomb
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/CrossingBarriers/" class="md-nav__link">
        CrossingBarriers
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/CRPA/" class="md-nav__link">
        CRPA
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/crystal/" class="md-nav__link">
        Crystal
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/DFT%2BU/" class="md-nav__link">
        DFT+U
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/DeltaSCF/" class="md-nav__link">
        DeltaSCF
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/DensityPotential/" class="md-nav__link">
        DensityPotential
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Dev/" class="md-nav__link">
        Dev
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/DFPT/" class="md-nav__link">
        DFPT
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/DMFT/" class="md-nav__link">
        DMFT
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/DynamicsMultibinit/" class="md-nav__link">
        DynamicsMultibinit
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/EffectiveMass/" class="md-nav__link">
        EffectiveMass
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/EFG/" class="md-nav__link">
        EFG
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Elastic/" class="md-nav__link">
        Elastic
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/ElPhonInt/" class="md-nav__link">
        ElPhonInt
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/ElPhonTransport/" class="md-nav__link">
        ElPhonTransport
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/ElecDOS/" class="md-nav__link">
        ElecDOS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/ElecBandStructure/" class="md-nav__link">
        ElecBandStructure
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/ExtFPMD/" class="md-nav__link">
        ExtFPMD
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/FileFormats/" class="md-nav__link">
        FileFormats
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/FitProcess/" class="md-nav__link">
        FitProcess
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/ForcesStresses/" class="md-nav__link">
        ForcesStresses
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/FrequencyMeshMBPT/" class="md-nav__link">
        FrequencyMeshMBPT
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/GeoConstraints/" class="md-nav__link">
        GeoConstraints
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/GeoOpt/" class="md-nav__link">
        GeoOpt
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Git/" class="md-nav__link">
        Git
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/GSintroduction/" class="md-nav__link">
        GSintroduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/GW/" class="md-nav__link">
        GW
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/GWls/" class="md-nav__link">
        GWls
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Hybrids/" class="md-nav__link">
        Hybrids
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/k-points/" class="md-nav__link">
        K points
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/LatticeModel/" class="md-nav__link">
        LatticeModel
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/LatticeWannier/" class="md-nav__link">
        LatticeWannier
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/LWFModel/" class="md-nav__link">
        LWFModel
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/LDAminushalf/" class="md-nav__link">
        LDAminushalf
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/LOTF/" class="md-nav__link">
        LOTF
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/longwave/" class="md-nav__link">
        Longwave
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Macroave/" class="md-nav__link">
        Macroave
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/MagField/" class="md-nav__link">
        MagField
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/MagMom/" class="md-nav__link">
        MagMom
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/MolecularDynamics/" class="md-nav__link">
        MolecularDynamics
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/multidtset/" class="md-nav__link">
        Multidtset
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/nonlinear/" class="md-nav__link">
        Nonlinear
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Optic/" class="md-nav__link">
        Optic
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Output/" class="md-nav__link">
        Output
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/parallelism/" class="md-nav__link">
        Parallelism
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/PAW/" class="md-nav__link">
        PAW
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/PIMD/" class="md-nav__link">
        PIMD
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Planewaves/" class="md-nav__link">
        Planewaves
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Phonons/" class="md-nav__link">
        Phonons
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/PhononBands/" class="md-nav__link">
        PhononBands
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/PhononWidth/" class="md-nav__link">
        PhononWidth
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/PortabilityNonRegression/" class="md-nav__link">
        PortabilityNonRegression
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/positron/" class="md-nav__link">
        Positron
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/printing/" class="md-nav__link">
        Printing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/PseudosPAW/" class="md-nav__link">
        PseudosPAW
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/q-points/" class="md-nav__link">
        Q points
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/RandStopPow/" class="md-nav__link">
        RandStopPow
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Recursion/" class="md-nav__link">
        Recursion
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/RPACorrEn/" class="md-nav__link">
        RPACorrEn
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/SCFControl/" class="md-nav__link">
        SCFControl
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/SCFAlgorithms/" class="md-nav__link">
        SCFAlgorithms
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/SelfEnergy/" class="md-nav__link">
        SelfEnergy
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/SmartSymm/" class="md-nav__link">
        SmartSymm
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/spinpolarisation/" class="md-nav__link">
        Spinpolarisation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/SpinDynamicsMultibinit/" class="md-nav__link">
        SpinDynamicsMultibinit
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/STM/" class="md-nav__link">
        STM
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Susceptibility/" class="md-nav__link">
        Susceptibility
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/TDDFT/" class="md-nav__link">
        TDDFT
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/TDepES/" class="md-nav__link">
        TDepES
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Temperature/" class="md-nav__link">
        Temperature
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/TransPath/" class="md-nav__link">
        TransPath
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/TuningSpeedMem/" class="md-nav__link">
        TuningSpeedMem
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Unfolding/" class="md-nav__link">
        Unfolding
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/UnitCell/" class="md-nav__link">
        UnitCell
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/vdw/" class="md-nav__link">
        Vdw
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Verification/" class="md-nav__link">
        Verification
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Wannier/" class="md-nav__link">
        Wannier
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Wavelets/" class="md-nav__link">
        Wavelets
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/xc/" class="md-nav__link">
        Xc
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/external_resources/" class="md-nav__link">
        External Resources
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Variables
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Variables" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Variables
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/" class="md-nav__link">
        All Variables
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      <label class="md-nav__link" for="__nav_3_2">
        Abinit
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Abinit" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Abinit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/basic/" class="md-nav__link">
        Basic
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/bse/" class="md-nav__link">
        Bethe-Salpeter
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/dev/" class="md-nav__link">
        Developers
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/dmft/" class="md-nav__link">
        DMFT
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/eph/" class="md-nav__link">
        Electron-Phonon
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/ffield/" class="md-nav__link">
        Varff
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/files/" class="md-nav__link">
        File-handling
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/geo/" class="md-nav__link">
        Geometry
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/gstate/" class="md-nav__link">
        Ground-State
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/gw/" class="md-nav__link">
        GW
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/internal/" class="md-nav__link">
        Internal
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/paral/" class="md-nav__link">
        Parallelism
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/paw/" class="md-nav__link">
        PAW
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/dfpt/" class="md-nav__link">
        DFPT
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/rlx/" class="md-nav__link">
        Relaxation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/vdw/" class="md-nav__link">
        VdW
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/w90/" class="md-nav__link">
        Wannier90
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/anaddb/" class="md-nav__link">
        Anaddb
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/atdep/" class="md-nav__link">
        aTDEP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/multibinit/" class="md-nav__link">
        Multibinit
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/optic/" class="md-nav__link">
        Optic
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/aim/" class="md-nav__link">
        Aim
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/external_parameters/" class="md-nav__link">
        External Parameters
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../variables/varset_stats/" class="md-nav__link">
        Statistics
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Tutorials
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      <label class="md-nav__link" for="__nav_4_2">
        Basic tutorials
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Basic tutorials" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Basic tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/base1/" class="md-nav__link">
        basic1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/base2/" class="md-nav__link">
        basic2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/base3/" class="md-nav__link">
        basic3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/base4/" class="md-nav__link">
        basic4
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/abinit_build/" class="md-nav__link">
        ABINIT_build
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/paw1/" class="md-nav__link">
        PAW1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/spin/" class="md-nav__link">
        Spin
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/polarization/" class="md-nav__link">
        Polarization & finite field
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/rf1/" class="md-nav__link">
        DFPT1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/rf2/" class="md-nav__link">
        DFPT2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/basepar/" class="md-nav__link">
        parallelism
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_10" type="checkbox" id="__nav_4_10" >
      
      <label class="md-nav__link" for="__nav_4_10">
        ABINIT postprocessors
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="ABINIT postprocessors" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_10">
          <span class="md-nav__icon md-icon"></span>
          ABINIT postprocessors
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/atdep1/" class="md-nav__link">
        aTDEP1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/cut3d/" class="md-nav__link">
        cut3D
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/fold2bloch/" class="md-nav__link">
        fold2bloch
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/optic/" class="md-nav__link">
        optic
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/wannier90/" class="md-nav__link">
        wannier90
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/z2pack/" class="md-nav__link">
        Z2pack
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_11" type="checkbox" id="__nav_4_11" >
      
      <label class="md-nav__link" for="__nav_4_11">
        DFT beyond basics
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="DFT beyond basics" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_11">
          <span class="md-nav__icon md-icon"></span>
          DFT beyond basics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/nuc/" class="md-nav__link">
        properties at the nucleus
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/dftu/" class="md-nav__link">
        DFT+U
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/ucalc_crpa/" class="md-nav__link">
        U_calc_RPA
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/ucalc_lr/" class="md-nav__link">
        U_calc_LR
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/paw2/" class="md-nav__link">
        PAW2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/paw3/" class="md-nav__link">
        PAW3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/positron/" class="md-nav__link">
        positron
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_12" type="checkbox" id="__nav_4_12" >
      
      <label class="md-nav__link" for="__nav_4_12">
        Many-Body Theory & excitations
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Many-Body Theory & excitations" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_12">
          <span class="md-nav__icon md-icon"></span>
          Many-Body Theory & excitations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/gw1/" class="md-nav__link">
        GW1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/gw2/" class="md-nav__link">
        GW2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/bse/" class="md-nav__link">
        Bethe-Salpeter
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/dmft/" class="md-nav__link">
        DMFT
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/tddft/" class="md-nav__link">
        TDDFT (Casida)
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_13" type="checkbox" id="__nav_4_13" >
      
      <label class="md-nav__link" for="__nav_4_13">
        DFPT & electron-phonon
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="DFPT & electron-phonon" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_13">
          <span class="md-nav__icon md-icon"></span>
          DFPT & electron-phonon
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/elastic/" class="md-nav__link">
        elastic
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/nlo/" class="md-nav__link">
        nonlinear
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/lattice_wannier/" class="md-nav__link">
        lattice_wannier
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/eph_intro/" class="md-nav__link">
        eph_intro
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/eph4mob/" class="md-nav__link">
        eph for mobilities
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/eph4zpr/" class="md-nav__link">
        eph for zero-point renormalization
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/eph_legacy/" class="md-nav__link">
        eph_legacy
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/eph_tdep_legacy/" class="md-nav__link">
        tdepes_legacy
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_14" type="checkbox" id="__nav_4_14" >
      
      <label class="md-nav__link" for="__nav_4_14">
        Multibinit
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Multibinit" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_14">
          <span class="md-nav__icon md-icon"></span>
          Multibinit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/multibinit/" class="md-nav__link">
        introduction to multibinit
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/lattice_model/" class="md-nav__link">
        lattice_model
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/spin_model/" class="md-nav__link">
        spin_model
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/lwf_model/" class="md-nav__link">
        lwf_model
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_15" type="checkbox" id="__nav_4_15" >
      
      <label class="md-nav__link" for="__nav_4_15">
        Advanced parallelism
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Advanced parallelism" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_15">
          <span class="md-nav__icon md-icon"></span>
          Advanced parallelism
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/paral_bandpw/" class="md-nav__link">
        paral_band_PW
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/paral_gswvl/" class="md-nav__link">
        paral_wavelets
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/paral_moldyn/" class="md-nav__link">
        paral_MD
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/paral_images/" class="md-nav__link">
        paral_images
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/paral_dfpt/" class="md-nav__link">
        paral_DFPT
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/paral_mbt/" class="md-nav__link">
        paral_MBPT
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        FAQ
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="FAQ" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          FAQ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/configuration_and_compilation/" class="md-nav__link">
        Configuration and compilation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/general_questions/" class="md-nav__link">
        General questions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/pre_and_post_processing/" class="md-nav__link">
        Pre/Post processing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/ground_state/" class="md-nav__link">
        Ground state
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/dfpt/" class="md-nav__link">
        DFPT
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Theory
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Theory" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Theory
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../theory/geometry/" class="md-nav__link">
        Geometry
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../theory/spherical_harmonics/" class="md-nav__link">
        Spherical Harmonics
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../theory/wavefunctions/" class="md-nav__link">
        Wavefunctions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../theory/noncollinear/" class="md-nav__link">
        Noncollinear
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../theory/pseudopotentials/" class="md-nav__link">
        Pseudopotentials
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../theory/mbt/" class="md-nav__link">
        Many-Body Perturbation Theory
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../theory/bse/" class="md-nav__link">
        Bethe-Salpeter
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../theory/documents/" class="md-nav__link">
        Documents
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../theory/acknowledgments/" class="md-nav__link">
        Acknowledgments
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../theory/bibliography/" class="md-nav__link">
        Bibliography
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../theory/acronyms/" class="md-nav__link">
        Acronyms
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      <label class="md-nav__link" for="__nav_7">
        Developers
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Developers" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Developers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../git_and_gitlab/" class="md-nav__link">
        Git and Gitlab
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../developers_howto/" class="md-nav__link">
        HowTo for developers
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../abimkdocs/" class="md-nav__link">
        Abimkdocs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../markdown/" class="md-nav__link">
        Markdown
      </a>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_5" type="checkbox" id="__nav_7_5" checked>
      
      <label class="md-nav__link" for="__nav_7_5">
        Test Suite
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Test Suite" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_5">
          <span class="md-nav__icon md-icon"></span>
          Test Suite
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../testsuite/" class="md-nav__link">
        Test list
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../testsuite_howto/" class="md-nav__link">
        Test Suite Howto
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          YAML-based test suite Howto
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        YAML-based test suite Howto
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#motivations" class="md-nav__link">
    Motivations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-details" class="md-nav__link">
    Implementation details
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yaml-configuration-file" class="md-nav__link">
    YAML configuration file
  </a>
  
    <nav class="md-nav" aria-label="YAML configuration file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-activate-the-yaml-mode" class="md-nav__link">
    How to activate the YAML mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#our-first-example-of-yaml-configuration-file" class="md-nav__link">
    Our first example of YAML configuration file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-concepts" class="md-nav__link">
    Basic concepts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-more-complicated-example" class="md-nav__link">
    A more complicated example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-use-filters-to-select-documents-by-iteration-state" class="md-nav__link">
    How to use filters to select documents by iteration state
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filters-api" class="md-nav__link">
    Filters API
  </a>
  
    <nav class="md-nav" aria-label="Filters API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#filter-declaration" class="md-nav__link">
    Filter declaration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filter-overlapping" class="md-nav__link">
    Filter overlapping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-use-equation-and-callback" class="md-nav__link">
    How to use equation and callback
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#command-line-interface" class="md-nav__link">
    Command line interface
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../yaml_tools_api/" class="md-nav__link">
        YAML-based test suite Python tools and API
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../XgType/" class="md-nav__link">
        XgType
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_7" type="checkbox" id="__nav_7_7" >
      
      <label class="md-nav__link" for="__nav_7_7">
        Pseudos
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Pseudos" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_7">
          <span class="md-nav__icon md-icon"></span>
          Pseudos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../psp1_info/" class="md-nav__link">
        psp1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../psp3_info/" class="md-nav__link">
        psp3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../psp45_info/" class="md-nav__link">
        psp45
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../psp5spinorbit_info/" class="md-nav__link">
        psp5
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../psp6_info/" class="md-nav__link">
        psp6
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../psp8_info/" class="md-nav__link">
        psp8
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../codestats/" class="md-nav__link">
        Code stats
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../autoconf_examples/" class="md-nav__link">
        Autoconf_examples
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../testlink/" class="md-nav__link">
        Test Page for linkcheck
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      <label class="md-nav__link" for="__nav_8">
        About
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="About" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../about/release-notes/" class="md-nav__link">
        Release Notes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../about/contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../about/history/" class="md-nav__link">
        History
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../about/license/" class="md-nav__link">
        License
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#motivations" class="md-nav__link">
    Motivations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-details" class="md-nav__link">
    Implementation details
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yaml-configuration-file" class="md-nav__link">
    YAML configuration file
  </a>
  
    <nav class="md-nav" aria-label="YAML configuration file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-activate-the-yaml-mode" class="md-nav__link">
    How to activate the YAML mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#our-first-example-of-yaml-configuration-file" class="md-nav__link">
    Our first example of YAML configuration file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-concepts" class="md-nav__link">
    Basic concepts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-more-complicated-example" class="md-nav__link">
    A more complicated example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-use-filters-to-select-documents-by-iteration-state" class="md-nav__link">
    How to use filters to select documents by iteration state
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filters-api" class="md-nav__link">
    Filters API
  </a>
  
    <nav class="md-nav" aria-label="Filters API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#filter-declaration" class="md-nav__link">
    Filter declaration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filter-overlapping" class="md-nav__link">
    Filter overlapping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-use-equation-and-callback" class="md-nav__link">
    How to use equation and callback
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#command-line-interface" class="md-nav__link">
    Command line interface
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              

                
                  <a href="https://github.com/abinit/abinit/edit/master/doc/developers/new_testsuite.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="yaml-based-tests-design-principles-and-implementation-details">YAML-based tests: design principles and implementation details<a class="headerlink" href="#yaml-based-tests-design-principles-and-implementation-details" title="Permanent link">&para;</a></h1>
<p>This document discusses the new YAML-based format used to represent physical results
in the main output file.
The connection with the ABINIT test suite and the yaml syntax used to define
tolerances, parameters and constraints is also discussed.</p>
<p>The new infrastructure consists of a set of Fortran modules to output 
structured data in YAML format and Python code to parse the output files and analyze data.</p>
<h2 id="motivations">Motivations<a class="headerlink" href="#motivations" title="Permanent link">&para;</a></h2>
<p>In ABINITv8 and previous versions, the ABINIT test suite is based on input files with the
associated reference output files.
Roughly speaking, an automatic test consists in comparing the reference file with
the output file in a <strong>line-oriented fashion</strong>
by computing differences between floating-point numbers <strong>without any knowledge</strong> about
the meaning and the importance of the numerical values.
This approach is very rigid and rather limited because it obliges developers to use a
single (usually large) tolerance to account for possibly large fluctuations in
the intermediate results whereas the tolerance criteria should be ideally
applied only to the final results that are (hopefully) independent of details
such as hardware, optimization level and parallelism.</p>
<p>This limitation is clearly seen when comparing the results of iterative algorithms.
The number of iterations required to converge, indeed, may depend
on several factors especially when the input parameters are far from convergence
or when different parallelization schemes or stochastic methods are used.
From the point of view of code validation, what really matters is the <strong>final converged value</strong>
plus the <strong>time to solution</strong> if performance ends up being of concern.
Unfortunately, any line-by-line comparison algorithm will miserably fail in such
conditions because it will continue to insist on having the same number of
iterations (lines) in the two calculations to consider the test succeeded.
It is therefore clear that the approach used so far to validate new developments in
Abinit is not able to cope with the challenges posed by high-performance
computing and that smarter and more flexible approaches are needed to address these limitations.
Ideally, we would like to be able to</p>
<ul>
<li>use <strong>different tolerances</strong> for particular quantities that are selected by keyword</li>
<li>be able to replace the check on the absolute and relative difference with a <strong>threshold check</strong>
  (is this quantity smaller that the give threshold?)</li>
<li>have some sort of syntax to apply different rules depending on the <strong>iteration state</strong> e.g. the dataset index</li>
<li>execute python code (<strong>callbacks</strong>) that operates on the data to perform more advanced tests requiring 
  some sort of post-processing</li>
<li>provide an easy-to-use <strong>declarative interface</strong> that allows developers to define the logic
  to compare selected quantities.</li>
</ul>
<p>In what follows, we present this new infrastructure, the design principles and the steps required
to define YAML-based tests.</p>
<!--
The goal of this project is to provide ABINIT developers with reusable tools to implement physics-aware tests.
With "physics-aware" we intend tests in which the developer can customize the tolerances and the logic used to
compare numerical results thanks to the fact that the new parser
is aware of the context and of the meaning of the numerical values extracted from the output file.
The new infrastructure consists of a set of Fortran modules to output
structured data in YAML format as well as Python code to parse the output files and analyze data.
One of the goals of this project is to implement a 

The new python-based infrastructure allows developers to implement more rigorous tests on the portability of
important physical quantities while ignoring intermediate results.
This goal is achieved by providing a *declarative* interface that allows developers to define
the logic used to compare selected physical quantities.
We also provide a declarative API to check that the results computed by the ab-initio code
satisfies fundamental physical and mathematical rules such as energy
conservation, Newton's third law, symmetry properties, etc.

That is not quite as simple as it sounds, especially because one of our goals is
to minimize the amount of (coding) work required to express such logic. 
There are therefore basic rules and design principles Abinit developers should be
aware of in order to take fully advantage of the new infrastructure. 
In what follows, we briefly describe the philosophy employed to implement the YAML-based
test suite, the syntax used to define tests and the modifications required to extend the framework.
-->

<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The new YAML-based testsuite relies on libraries that are not provided
by the python standard library.
To install these dependencies in <em>user</em> mode, use:</p>
<div class="codehilite"><pre><span></span><code>pip install numpy pyyaml pandas --user
</code></pre></div>

<p>If these dependencies are not available, the new test system will be
disabled and a warning message is printed to the terminal.</p>
</div>
<h2 id="implementation-details">Implementation details<a class="headerlink" href="#implementation-details" title="Permanent link">&para;</a></h2>
<p>For reasons that will be clear later, implementing smart algorithms requires metadata and context.
In other words, the python code needs to have some basic understanding of the meaning of the numerical values 
extracted from the output file and must be able to locate a particular property by name or by its &ldquo;position&rdquo;
inside the output file.
For this reason, the most important physical results are now written in the main output file (<em>ab_out</em>)
using machine-readable <a href="https://en.wikipedia.org/wiki/YAML">YAML</a> documents.</p>
<p>A YAML document starts with three hyphens (&mdash;) followed by an
<em>optional</em> tag beginning with an exclamation mark (e.g. <code>!ETOT</code>). 
Three periods (&hellip;) signals the end of the document. 
Following these rules, one can easily write a dictionary containing the different contributions
to the total free energy using:</p>
<div class="highlight"><pre><span></span><code><span class="nn">---</span> <span class="kt">!EnergyTerms</span>
<span class="nt">comment             </span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Components of total free energy (in Hartree)</span>
<span class="nt">kinetic             </span><span class="p">:</span>  <span class="l l-Scalar l-Scalar-Plain">4.323825067238190201E+01</span>
<span class="nt">hartree             </span><span class="p">:</span>  <span class="l l-Scalar l-Scalar-Plain">3.133994553363548619E+01</span>
<span class="nt">xc                  </span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">-2.246182631222462689E+01</span>
<span class="nt">Ewald energy        </span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">-1.142203169790575572E+02</span>
<span class="nt">psp_core            </span><span class="p">:</span>  <span class="l l-Scalar l-Scalar-Plain">6.536925226004570710E+00</span>
<span class="nt">local_psp           </span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">-9.852521179991468614E+01</span>
<span class="nt">spherical_terms     </span><span class="p">:</span>  <span class="l l-Scalar l-Scalar-Plain">2.587718945528139081E+00</span>
<span class="nt">internal            </span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">-1.515045147136467563E+02</span>
<span class="s">&#39;-kT*entropy&#39;</span>       <span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">-3.174881766478041684E-03</span>
<span class="nt">total_energy        </span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">-1.515076895954132397E+02</span>
<span class="nt">total_energy_eV     </span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">-4.122733899322517573E+03</span>
<span class="nn">...</span>
</code></pre></div>
<p>Further details about the meaning of <strong>tags</strong>, <strong>labels</strong> and their connection with the
testing infrastructure will be given in the below sections. For the time being,
it is sufficient to say that we opted for YAML because it is a <em>human-readable</em>
data serialization language already used in the log file to record important
events such as WARNINGs, ERRORs and COMMENTs (this is indeed the <em>protocol</em>
employed by AbiPy to monitor the status of Abinit calculations).
Many programming languages, including python, provide support for YAML hence
it is relatively easy to implement post processing tools
based on well-established python libraries for scientific computing such as
NumPy, SciPy, Matplotlib and Pandas. Last but not least, writing YAML in
Fortran does not represent an insurmountable problem provided one keeps the
complexity of the YAML document at a <em>reasonable level</em>.
Our Fortran implementation, indeed, supports only a subset of the YAML specifications:</p>
<ul>
<li>scalars</li>
<li>arrays with one or two dimensions</li>
<li>dictionaries mapping strings to scalars</li>
<li>tables in CSV format (this is an extension of the standard)</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>YAML is not designed to handle large amount of data therefore it should
not be used to represent large arrays for which performance is critical and human-readability
is lost by definition (do you really consider a YAML list with one thousand numbers human-readable?).
Following this philosophy, YAML is supposed to be used to print the most important results
in the main output file and should not be considered as a replacement for binary netcdf files
when it comes to storing large data structures with lots of metadata.</p>
<p>Note also that we do not plan to rewrite entirely the main output file in YAML syntax
but we prefer to focus on those physical properties that will be used by the new test procedure
to validate new developments.
This approach, indeed, will facilitate the migration to the new YAML-based approach as only selected portions
of the output file will be ported to the new format thus maintaining the look and the feel relatively
close to the previous <em>unstructured</em> format.</p>
</div>
<!--
In this tutorial we mainly focus on the user interface i.e. on the syntax used to define Yaml-based tests.
For the technical details related to the internal implementation see
-->

<h2 id="yaml-configuration-file">YAML configuration file<a class="headerlink" href="#yaml-configuration-file" title="Permanent link">&para;</a></h2>
<h3 id="how-to-activate-the-yaml-mode">How to activate the YAML mode<a class="headerlink" href="#how-to-activate-the-yaml-mode" title="Permanent link">&para;</a></h3>
<p>The parameters governing the execution of the test
are specified in the <code>TEST_INFO</code> section located at the end of the input file.
The options are given in the <a href="https://en.wikipedia.org/wiki/INI_file">INI file format</a>.
The integration of the new YAML-based tests with the pre-existent infrastructure
is obtained via two modifications of the current specifications.
More specifically:</p>
<ul>
<li>
<p>the <strong>files_to_test</strong> section now accepts the optional argument <strong>use_yaml</strong>.
  The allowed values are:</p>
<ul>
<li>&ldquo;yes&rdquo; &rarr; activate YAML mode</li>
<li>&ldquo;no&rdquo; &rarr;  do not use YAML mode (default)</li>
<li>&ldquo;only&rdquo; &rarr; use YAML mode, deactivate legacy fldiff algorithm</li>
</ul>
</li>
<li>
<p>a new <em>optional</em> section <strong>[yaml_test]</strong> has been added. 
  This section contains two mutually exclusive fields:</p>
<ul>
<li>
<p><em>file</em> &rarr; path of the YAML configuration file.
  The path is relative to the input file. A natural choice
  would be to use the same prefix as the input file e.g. &ldquo;./t21.yaml&rdquo; 
  is the configuration file associated to the input file &ldquo;t21.in&rdquo;.</p>
</li>
<li>
<p><em>test</em> &rarr; multi-line string with the YAML specifications. This option may
  be used for really short configurations heavily relying on the default values.</p>
</li>
</ul>
</li>
</ul>
<p>An example of <code>TEST_INFO</code> section that activates the YAML mode can be found in <a class="wikilink abifile-wikilink" data-tippy-content="DFT+DMFT for SrVO3 using Hubard I code with KGB parallelism" data-toggle="popover" href="/tests/paral/Input/t86.abi" target="_blank">paral[86]</a>:</p>
<div class="highlight"><pre><span></span><code><span class="c1">#%%&lt;BEGIN TEST_INFO&gt;</span>
<span class="c1">#%% [setup]</span>
<span class="c1">#%% executable = abinit</span>
<span class="c1">#%% [files]</span>
<span class="c1">#%% psp_files = 23v.paw, 38sr.paw, 8o.paw</span>
<span class="c1">#%% [paral_info]</span>
<span class="c1">#%% nprocs_to_test = 4</span>
<span class="c1">#%% max_nprocs = 4</span>
<span class="c1">#%% [NCPU_4]</span>
<span class="c1">#%% files_to_test =</span>
<span class="c1">#%%   t86_MPI4.out, use_yaml = yes, tolnlines = 4, tolabs = 2.0e-2, tolrel = 1.0, fld_options = -easy;</span>
<span class="c1">#%% [extra_info]</span>
<span class="c1">#%% authors = B. Amadon, T. Cavignac</span>
<span class="c1">#%% keywords = DMFT, FAILS_IFMPI</span>
<span class="c1">#%% description = DFT+DMFT for SrVO3 using Hubard I code with KGB parallelism</span>
<span class="c1">#%% topics = DMFT, parallelism</span>
<span class="c1">#%% [yaml_test]</span>
<span class="c1">#%% file = ./t86.yaml</span>
<span class="c1">#%%&lt;END TEST_INFO&gt;</span>
</code></pre></div>
<p>with the associated YAML configuration file given by:</p>
<div class="text-center"><button id="uuid-9897113b-06f3-4aef-8c9b-be756f0d9b18" class="md-button md-button--secondary"> View tests/paral/Input/t86.yaml </button></div>
<div id="uuid-9b704246-3d54-4ecc-bf7f-5c9f3a0aec03" class="my_dialog" title="tests/paral/Input/t86.yaml" hidden><div><pre class="small-text">
tol_eq: 1.0e-6
tol_vec: 1.0e-5

ks:
    # tolvrs 1.0e-7
    tol_abs: 5.0e-6
    tol_rel: 5.0e-6
    ResultsGS!:
        convergence:
            ceil: 1.0e-6
        cartesian_stress_tensor:
            tol_vec: 1.0e-7

#    EtotSteps:
#        data:
#            callback:
#                method: last_iter
#                tol_iter: 3
#                Etot(hartree):
#                    tol: 1.0e-7
#                deltaE(h):
#                    ceil: 2.0e-8
#                residm:
#                    ceil: 5.0e-7
#                nres2:
#                    ceil: 2.0e-8

dmft:
    tol_abs: 2.0e-8
    tol_rel: 5.0e-9
    ResultsGS!:  # hard reset result_gs
        convergence:
            ceil: 1.0e-6
            deltae:
                ceil: 2.0e-3
            res2:
                ignore: true
        fermie:
            tol_abs: 1.0e-7
            tol_rel: 1.0e-8
        cartesian_stress_tensor:
            ignore: true
    EnergyTerms:
        total_energy_eV:
            tol_abs: 1.0e-4
            tol_rel: 1.0e-8
    EnergyTermsDC:
        tol_abs: 1.0e-7
        total_energy_dc_eV:
            tol_abs: 1.0e-4
            tol_rel: 1.0e-8

#    EtotSteps:
#        data:
#            callback:
#                method: last_iter
#                tol_iter: 3
#                Etot(hartree):
#                    tol: 1.0e-7
#                deltaE(h):
#                    ceil: 2.0e-4
#                residm:
#                    ceil: 1.0e-12
#                nres2:
#                    ceil: 2.0e-1


filters:
    ks:
        dtset: 1
    dmft:
        dtset: 2

</pre>
</div></div>

<script> $(function() { abidocs_jqueryui_dialog("#uuid-9b704246-3d54-4ecc-bf7f-5c9f3a0aec03", "#uuid-9897113b-06f3-4aef-8c9b-be756f0d9b18") }); </script>

<h3 id="our-first-example-of-yaml-configuration-file">Our first example of YAML configuration file<a class="headerlink" href="#our-first-example-of-yaml-configuration-file" title="Permanent link">&para;</a></h3>
<p>Let us start with a minimalistic example in which we compare the components of
the total free energy in the <code>Etot</code> document with an absolute tolerance of 1.0e-7 Ha.
The YAML configuration file will look like:</p>
<div class="highlight"><pre><span></span><code><span class="nt">Etot</span><span class="p">:</span>
    <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-7</span>
</code></pre></div>
<p>The <code>tol_abs</code> keyword defines the <strong>constraint</strong> that will applied to <strong>all the children</strong> of the <code>Etot</code> document.
In other words, all the entries in the <code>Etot</code> dictionary will be compared with 
an absolute tolerance of 1.0e-7 and the <strong>default value</strong> for the relative difference <code>tol_rel</code> as this 
tolerance is not explicitly specified.</p>
<!--
In order to pass the test, all the absolute differences must be smaller that `tol_abs`.
If this condition is not fulfilled, the test will fail and python will list the entries that did not pass the test.
-->

<p>There are however cases in which we would like to specify different tolerances for particular entries
instead of relying on the <em>global</em> tolerances.
The <code>Etot</code> document, for example, contains the total energy in eV in the <code>Total energy (eV)</code> entry.
To use a different absolute tolerance for this property, we <strong>specialize</strong> the rule with the syntax:</p>
<!--
Since the unit is different, the absolute tolerance does not have the same impact on the precision.
We want to achieve the same relative precision on this term but we cannot
achieve the same absolute precision. Though we will **specialize** the rules
and use the `tol_rel` constraint. 
We could do something like this:

<div class="highlight"><pre><span></span><code><span class="nt">Etot</span><span class="p">:</span>
    <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-7</span>
    <span class="nt">Total energy (eV)</span><span class="p">:</span>
        <span class="nt">tol_rel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-10</span>
</code></pre></div>

However the `tol_abs` constraint defined in `Etot` is _inherited_ by `Total
energy (eV)` which means that the comparison will be performed with a relative tolerance `tol_rel` of
1.0e-10 **and** an absolute tolerance `tol_abs` of 1.0e-7. Most of the time it is
what we need even though here it's not. So we will just use a different
tolerance for `tol_abs` in `Total energy (eV)`.
-->

<div class="highlight"><pre><span></span><code><span class="nt">Etot</span><span class="p">:</span>
    <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-7</span>
    <span class="nt">Total energy (eV)</span><span class="p">:</span>
        <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-5</span>
</code></pre></div>
<!--
Now we achieve the same relative precision and the test does not fail because
of the looser absolute precision of the total energy in eV.
-->

<p>To change the default value for the relative difference, it is sufficient to specify the 
constraint outside of the document:</p>
<div class="highlight"><pre><span></span><code><span class="nt">tol_rel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-2</span>

<span class="nt">Etot</span><span class="p">:</span>
    <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-7</span>
    <span class="nt">Total energy (eV)</span><span class="p">:</span>
        <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-5</span>
</code></pre></div>
<h3 id="basic-concepts">Basic concepts<a class="headerlink" href="#basic-concepts" title="Permanent link">&para;</a></h3>
<p>In the previous section, we presented a minimal example of configuration file.
In the next paragraphs we will discuss in more detail how to implement more advanced test
but before proceeding with the examples, we need to introduce some basic terminology
to facilitate the discussion.</p>
<!--
To explain how to build a test specification we will go step-by-step through
the definition of [[test:paral_86]].
First we have to introduce the most important concepts.
-->

<dl>
<dt>Document tree</dt>
<dd>The YAML document is a dictionary that can be treated as a tree
  whose nodes have a label and leaf are scalars or special data structures
  identified by a tag (note however that not all tags mark a leaf).
  The top-level nodes are the YAML documents and their labels are the names of their tag.</dd>
<dt>Config tree</dt>
<dd>The YAML configuration also takes the form of a tree where nodes are
  <strong>specializations</strong> and its leaf represent <strong>parameters</strong> or <strong>constraints</strong>.
  Its structure matches the structure of the <strong>document tree</strong> thus one can define rules
  (constraint and parameters) that will be applied to a specific part of the <strong>document tree</strong>.</dd>
<dt>Specialization</dt>
<dd>The rules defined under a specialization will apply only on the matching node
  of the <em>document tree</em> and its children.</dd>
<dt>Constraint</dt>
<dd>A constraint is a condition one imposes for the test to succeed. Constraints
  can apply to leafs of the document tree or to nodes depending of the nature of the constraint.</dd>
<dt>Parameter</dt>
<dd>A parameter is a value that can be used by the constraints to modify their behavior.</dd>
<dt>Iteration state</dt>
<dd>An iteration state describes how many iterations of each possible level are present
  in the run (e.g. idtset = 2, itimimage = not used, image = 5, time = not used).
  It gives information on the current state of the run. Documents are implicitly
  associated to their iteration state. This information is made available to
  the test engine through specialized YAML documents with <code>IterStart</code> tag.</dd>
</dl>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To get the list of constraints and parameters, run:</p>
<div class="codehilite"><pre><span></span><code><span class="o">~</span><span class="n">abinit</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">testtools</span><span class="o">.</span><span class="n">py</span> <span class="n">explore</span>
</code></pre></div>

<p>and type <code>show *</code>. You can then type for example <code>show tol_eq</code> to learn more
about a specific constraint or parameter.</p>
</div>
<!--
A few conventions on documents writing

: All data document have a **tag**. It should be a unique identifier
  at the scale of an _iteration state_. It also describes the structure of the document
  like other uses of tags but in this case it identify the document. The *comment* field is
  optional but it is recommended especially when the purpose of the document is not obvious.
-->

<h3 id="a-more-complicated-example">A more complicated example<a class="headerlink" href="#a-more-complicated-example" title="Permanent link">&para;</a></h3>
<p>The <code>Etot</code> document is the simplest possible document. It only contains fields
with real values. Now we will have a look at the <code>ResultsGS</code> document
that represents the results stored in the corresponding Fortran datatype used in Abinit.
The YAML document is now given by:</p>
<div class="highlight"><pre><span></span><code><span class="nn">---</span> <span class="kt">!ResultsGS</span>
<span class="nt">comment   </span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Summary of ground states results.</span>
<span class="nt">natom     </span><span class="p">:</span>        <span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="nt">nsppol    </span><span class="p">:</span>        <span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">cut       </span><span class="p">:</span> <span class="p p-Indicator">{</span><span class="s">&quot;ecut&quot;</span><span class="p p-Indicator">:</span>   <span class="nv">1.20000000000000000E+01</span><span class="p p-Indicator">,</span> <span class="s">&quot;pawecutdg&quot;</span><span class="p p-Indicator">:</span>   <span class="nv">2.00000000000000000E+01</span><span class="p p-Indicator">,</span> <span class="p p-Indicator">}</span>
<span class="nt">convergence</span><span class="p">:</span> <span class="p p-Indicator">{</span>
    <span class="s">&quot;deltae&quot;</span><span class="p p-Indicator">:</span>   <span class="nv">2.37409381043107715E-09</span><span class="p p-Indicator">,</span> <span class="s">&quot;res2&quot;</span><span class="p p-Indicator">:</span>   <span class="nv">1.41518780109792898E-08</span><span class="p p-Indicator">,</span> 
    <span class="s">&quot;residm&quot;</span><span class="p p-Indicator">:</span>   <span class="nv">2.60254842131463755E-07</span><span class="p p-Indicator">,</span> <span class="s">&quot;diffor&quot;</span><span class="p p-Indicator">:</span> <span class="nv">0.00000000000000000E+00</span><span class="p p-Indicator">,</span> 
<span class="p p-Indicator">}</span>
<span class="nt">etotal    </span><span class="p">:</span>  <span class="l l-Scalar l-Scalar-Plain">-1.51507711707660150E+02</span>
<span class="nt">entropy   </span><span class="p">:</span>   <span class="l l-Scalar l-Scalar-Plain">0.00000000000000000E+00</span>
<span class="nt">fermie    </span><span class="p">:</span>   <span class="l l-Scalar l-Scalar-Plain">3.09658145725792422E-01</span>
<span class="nt">stress tensor</span><span class="p">:</span> <span class="kt">!Tensor</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span>  <span class="nv">3.56483996349480498E-03</span><span class="p p-Indicator">,</span>   <span class="nv">0.00000000000000000E+00</span><span class="p p-Indicator">,</span>   <span class="nv">0.00000000000000000E+00</span><span class="p p-Indicator">,</span> <span class="p p-Indicator">]</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span>  <span class="nv">0.00000000000000000E+00</span><span class="p p-Indicator">,</span>   <span class="nv">3.56483996349480151E-03</span><span class="p p-Indicator">,</span>   <span class="nv">0.00000000000000000E+00</span><span class="p p-Indicator">,</span> <span class="p p-Indicator">]</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span>  <span class="nv">0.00000000000000000E+00</span><span class="p p-Indicator">,</span>   <span class="nv">0.00000000000000000E+00</span><span class="p p-Indicator">,</span>   <span class="nv">3.56483996349478416E-03</span><span class="p p-Indicator">,</span> <span class="p p-Indicator">]</span>

<span class="nt">cartesian forces</span><span class="p">:</span> <span class="kt">!CartForces</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span> <span class="nv">-0.00000000000000000E+00</span><span class="p p-Indicator">,</span>  <span class="nv">-0.00000000000000000E+00</span><span class="p p-Indicator">,</span>  <span class="nv">-0.00000000000000000E+00</span><span class="p p-Indicator">,</span> <span class="p p-Indicator">]</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span> <span class="nv">-0.00000000000000000E+00</span><span class="p p-Indicator">,</span>  <span class="nv">-0.00000000000000000E+00</span><span class="p p-Indicator">,</span>  <span class="nv">-0.00000000000000000E+00</span><span class="p p-Indicator">,</span> <span class="p p-Indicator">]</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span> <span class="nv">-0.00000000000000000E+00</span><span class="p p-Indicator">,</span>  <span class="nv">-0.00000000000000000E+00</span><span class="p p-Indicator">,</span>  <span class="nv">-0.00000000000000000E+00</span><span class="p p-Indicator">,</span> <span class="p p-Indicator">]</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span> <span class="nv">-0.00000000000000000E+00</span><span class="p p-Indicator">,</span>  <span class="nv">-0.00000000000000000E+00</span><span class="p p-Indicator">,</span>  <span class="nv">-0.00000000000000000E+00</span><span class="p p-Indicator">,</span> <span class="p p-Indicator">]</span>
<span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span> <span class="nv">-0.00000000000000000E+00</span><span class="p p-Indicator">,</span>  <span class="nv">-0.00000000000000000E+00</span><span class="p p-Indicator">,</span>  <span class="nv">-0.00000000000000000E+00</span><span class="p p-Indicator">,</span> <span class="p p-Indicator">]</span>
<span class="nn">...</span>
</code></pre></div>
<p>This YAML document is more complicated as it contains scalar fields, dictionaries and even 2D arrays.
<strong>MG: Are integer values always compared without tolerance?</strong>
Still, the parsers will be able to locate the entire document via its tag/label and address all the entries by name.
To specify the tolerance for the relative difference for all the scalar quantities in <code>ResultsGS</code>,
we just add a new entry to the YAML configuration file similarly to what we did for <code>EnergyTerms</code>: </p>
<div class="highlight"><pre><span></span><code><span class="nt">EnergyTerms</span><span class="p">:</span>
    <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-7</span>
    <span class="nt">total_energy_eV</span><span class="p">:</span>
        <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-5</span>
        <span class="nt">tol_rel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-10</span>

<span class="nt">ResultsGS</span><span class="p">:</span>
    <span class="nt">tol_rel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-8</span>
</code></pre></div>
<p>At this point we have to precise that there are implicit top-level settings that
are applied on all quantities that are not subject to a more specific rule.
For example in the above example ResultsGS is subject to the default absolute
tolerance, whereas the default relative tolerance have been overridden.</p>
<!--
For simplicity sake I will only write the `ResultsGS` part in next examples.
-->
<p>Unfortunately, such a strict value for <code>tol_rel</code> will become very problematic
when we have to compare the residues stored in the <code>convergence</code> dictionary!
In this case, it makes more sense to check that all the residues are below a certain threshold.
This is what the <strong>ceil</strong> constraint is for:</p>
<div class="highlight"><pre><span></span><code><span class="nt">ResultsGS</span><span class="p">:</span>
    <span class="nt">tol_rel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-8</span>
    <span class="nt">convergence</span><span class="p">:</span>
        <span class="nt">ceil</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3.0e-7</span>
</code></pre></div>
<p>Now the test will fail if one of the components of the <code>convergence</code> dictionary is above 3.0e-7.
Note that the <code>ceil</code> constraint automatically disables the check for <code>tol_rel</code> and <code>tol_abs</code> inside <code>convergence</code>.
In other words, all the scalar entries in <code>ResultsGS</code> will be compared with our <code>tol_rel</code> and the default <code>tol_abs</code>
whereas the entries in the <code>convergence</code> dictionary will be tested against <code>ceil</code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Within the explore shell <code>show ceil</code> will list
the constraints that are disabled by the use of <code>ceil</code> in the <em>exclude</em> field.</p>
</div>
<p>Up to now we have been focusing on scalar quantities for which the concept of 
relative and absolute difference is unambiguously defined but how do we compare vectors and matrices?
Fields with the <code>!TensorCart</code> tags are leafs of the tree. The tester routine
won&rsquo;t try to compare each individual coefficient with <code>tol_rel</code>. However we
still want to check that it does not change too much. For that purpose we use the
<code>tol_vec</code> constraint which apply to all arrays derived from <code>BaseArray</code> (most
arrays with a tag). <code>BaseArray</code> let us use the capabilities of Numpy arrays with
YAML defined arrays. <code>tol_vec</code> check the euclidean distance between the reference
and the output arrays. Since we also want to apply this constraint to
<code>cartesian_force</code>, we will define the constraint at the top level of <code>ResultsGS</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nt">ResultsGS</span><span class="p">:</span>
    <span class="nt">tol_rel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-8</span>
    <span class="nt">tol_vec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-5</span>
    <span class="nt">convergence</span><span class="p">:</span>
        <span class="nt">ceil</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3.0e-7</span>
</code></pre></div>
<h3 id="how-to-use-filters-to-select-documents-by-iteration-state">How to use filters to select documents by iteration state<a class="headerlink" href="#how-to-use-filters-to-select-documents-by-iteration-state" title="Permanent link">&para;</a></h3>
<p>Thanks to the syntax presented in the previous sections, one can customize tolerances for different 
documents and different entries.
Note however that these rules will be applied to all the documents found in the output file.
This means that we are implicitly assuming that all the different steps of the calculation
have similar numerical stability.
There are however cases in which the results of particular datasets are less numerically stable than the others.
An example will help clarify. </p>
<p>The test <a class="wikilink abifile-wikilink" data-tippy-content="DFT+DMFT for SrVO3 using Hubard I code with KGB parallelism" data-toggle="popover" href="/tests/paral/Input/t86.abi" target="_blank">paral[86]</a> uses two datasets to perform two different computations.
The first dataset computes the DFT density with LDA while
the second dataset uses the LDA density to perform a DMFT computation.
The entire calculation is supposed to take less than ~3-5 minutes hence the input parameters 
are severely under converged and the numerical noise propagates quickly through the different steps.
As a consequence, one cannot expect the DFMT results to have the same numerical stability as the LDA part. 
Fortunately, one can use <strong>filters</strong> to specify different convergence criteria for the two datasets.</p>
<p>A filter is a mechanism that allows one to associate a specific configuration to a set of <strong>iteration states</strong>.
A filter is defined in a separated section of the configuration file under the node <code>filters</code>.
Let&rsquo;s declare two filters with the syntax:</p>
<div class="highlight"><pre><span></span><code><span class="nt">filters</span><span class="p">:</span>
    <span class="nt">ks</span><span class="p">:</span>
        <span class="nt">dtset</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">dmft</span><span class="p">:</span>
        <span class="nt">dtset</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
</code></pre></div>
<p>Here we are simply saying that we want to associate the label <code>ks</code> to all
documents created in the first dataset and the label <code>dmft</code> to all document
created in the second dataset. The chose of the names <code>ks</code> and <code>dmft</code> are
absolutely arbitrary. Pick anything that make sense to your test. This is the
simplest filter declaration possible.  See <a href="#filters-api">here</a> for more info on
filter declarations.  Now we can use our filters. First of all we will associate
the configuration we already wrote to the <code>ks</code> filter so we can have a different
configuration for the second dataset. The YAML file now reads</p>
<div class="highlight"><pre><span></span><code><span class="nt">filters</span><span class="p">:</span>
    <span class="nt">ks</span><span class="p">:</span>
        <span class="nt">dtset</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">dmft</span><span class="p">:</span>
        <span class="nt">dtset</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>

<span class="nt">ks</span><span class="p">:</span>
    <span class="nt">EnergyTerms</span><span class="p">:</span>
        <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-7</span>
        <span class="nt">total_energy_eV</span><span class="p">:</span>
            <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-5</span>
            <span class="nt">tol_rel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-10</span>

    <span class="nt">ResultsGS</span><span class="p">:</span>
        <span class="nt">tol_rel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-8</span>
        <span class="nt">tol_vec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-5</span>
        <span class="nt">convergence</span><span class="p">:</span>
            <span class="nt">ceil</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3.0e-7</span>
</code></pre></div>
<p>By inserting the configuration options under the <code>ks</code> node, we specify that these rules
apply only to the first dataset. We will then create a new <code>dmft</code> node and create a
configuration following the same procedure as before.
We end up with something like this:</p>
<div class="highlight"><pre><span></span><code><span class="nt">filters</span><span class="p">:</span>
    <span class="nt">ks</span><span class="p">:</span>
        <span class="nt">dtset</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">dmft</span><span class="p">:</span>
        <span class="nt">dtset</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>

<span class="nt">ks</span><span class="p">:</span>
    <span class="nt">EnergyTerms</span><span class="p">:</span>
        <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-7</span>
        <span class="nt">total_energy_eV</span><span class="p">:</span>
            <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-5</span>
            <span class="nt">tol_rel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-10</span>

    <span class="nt">ResultsGS</span><span class="p">:</span>
        <span class="nt">tol_rel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-8</span>
        <span class="nt">tol_vec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-5</span>
        <span class="nt">convergence</span><span class="p">:</span>
            <span class="nt">ceil</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3.0e-7</span>

<span class="nt">dmft</span><span class="p">:</span>
    <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2.0e-8</span>
    <span class="nt">tol_rel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5.0e-9</span>

    <span class="nt">ResultsGS</span><span class="p">:</span>
        <span class="nt">convergence</span><span class="p">:</span>
            <span class="nt">ceil</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-6</span>
            <span class="nt">diffor</span><span class="p">:</span>
                <span class="nt">ignore</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="nt">fermie</span><span class="p">:</span>
            <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-7</span>
            <span class="nt">tol_rel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-8</span>

        <span class="nt">stress tensor</span><span class="p">:</span>
            <span class="nt">ignore</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">EnergyTerms</span><span class="p">:</span>
        <span class="nt">total_energy_eV</span><span class="p">:</span>
            <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-5</span>
            <span class="nt">tol_rel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-8</span>

    <span class="nt">EnergyTermsDC</span><span class="p">:</span>
        <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-7</span>
        <span class="nt">total_energy_dc_eV</span><span class="p">:</span>
            <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-5</span>
            <span class="nt">tol_rel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-8</span>
</code></pre></div>
<h2 id="filters-api">Filters API<a class="headerlink" href="#filters-api" title="Permanent link">&para;</a></h2>
<p>Filters provide a practical way to specify different configuration for different
states of iterations without having to rewrite everything from scratch.</p>
<h3 id="filter-declaration">Filter declaration<a class="headerlink" href="#filter-declaration" title="Permanent link">&para;</a></h3>
<p>A filter can specify all currently known iterators: <strong>dtset</strong>, <strong>timimage</strong>, <strong>image</strong>, and <strong>time</strong>.
For each iterator, a set of integers can be defined with three different methods:</p>
<ul>
<li>a single integer value e.g. <code>dtset: 1</code></li>
<li>a YAML list of values e.g. <code>dtset: [1, 2, 5]</code></li>
<li>a mapping with the optional members &ldquo;from&rdquo; and &ldquo;to&rdquo; specifying the boundaries (both
  included) of the integer interval e.g. <code>dtset: {from: 1, to: 5}</code>. 
  If &ldquo;from&rdquo; is omitted, the default is 1. If &ldquo;to&rdquo; is omitted the default is no upper boundary. </li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The order is never relevant in parsing YAML (unless you are writing a list
of course). As a consequence you can define filter wherever you want in the
file.</p>
</div>
<h3 id="filter-overlapping">Filter overlapping<a class="headerlink" href="#filter-overlapping" title="Permanent link">&para;</a></h3>
<p>Several filters can apply to the same document even when they overlap. Note, however, 
that overlapping filters must have a trivial order of <em>specificity</em>.
In other words, one filter must be a subset of the other one.
The example below is OK because <em>f2</em> is included in <em>f1</em>  i.e. is more specific:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># this is fine</span>
<span class="nt">filters</span><span class="p">:</span>
    <span class="nt">f1</span><span class="p">:</span>
        <span class="nt">dtset</span><span class="p">:</span>
            <span class="nt">from</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
            <span class="nt">to</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">7</span>
        <span class="nt">image</span><span class="p">:</span>
            <span class="nt">from</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">4</span>

    <span class="nt">f2</span><span class="p">:</span>
        <span class="nt">dtset</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">7</span>
        <span class="nt">image</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">4</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">6</span>
</code></pre></div>
<p>whereas this second example will raise an error because <em>f4</em> is not included in <em>f3</em>.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># this will raise an error</span>
<span class="nt">filters</span><span class="p">:</span>
    <span class="nt">f3</span><span class="p">:</span>
        <span class="nt">dtset</span><span class="p">:</span>
            <span class="nt">from</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
            <span class="nt">to</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">7</span>
        <span class="nt">image</span><span class="p">:</span>
            <span class="nt">from</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">4</span>

    <span class="nt">f4</span><span class="p">:</span>
        <span class="nt">dtset</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">7</span>
        <span class="nt">image</span><span class="p">:</span>
            <span class="nt">from</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
            <span class="nt">to</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
</code></pre></div>
<p>When a test is defined, the default tree is overridden by the user-defined tree.
When a filtered tree is used, it overrides the less specific tree. Trees are
sequentially applied to the tree from the most general to the most specific one.
The overriding process is often used, though it is important to know how it
works. By default, only what is explicitly specified in the file is overridden which means
that if a constraint is defined at a deeper level on the default tree than what
is done on the new tree, the original constraints will be kept. For example let
<code>f1</code>  and <code>f2</code> be two filters such that <code>f2</code> is included in <code>f1</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nt">filters</span><span class="p">:</span>
    <span class="nt">f1</span><span class="p">:</span>
        <span class="nt">dtset</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">f2</span><span class="p">:</span>
        <span class="nt">dtset</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>

<span class="nt">f1</span><span class="p">:</span>
    <span class="nt">ResultsGS</span><span class="p">:</span>
        <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-6</span>
        <span class="nt">convergence</span><span class="p">:</span>
            <span class="nt">ceil</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-6</span>
            <span class="nt">diffor</span><span class="p">:</span>
                <span class="l l-Scalar l-Scalar-Plain">1.0e-4</span>

<span class="nt">f2</span><span class="p">:</span>
    <span class="nt">ResultsGS</span><span class="p">:</span>
        <span class="nt">tol_rel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-7</span>
        <span class="nt">convergence</span><span class="p">:</span>
            <span class="nt">ceil</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-7</span>
</code></pre></div>
<p>When the tester will reach the fifth image of the first dataset, the config tree
used will be the following:</p>
<div class="highlight"><pre><span></span><code><span class="nt">ResultsGS</span><span class="p">:</span>
    <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-6</span>  <span class="c1"># this come from application of f1</span>
    <span class="nt">tol_rel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-7</span>  <span class="c1"># this has been appended without modifying anything else when appling f2</span>
    <span class="nt">convergence</span><span class="p">:</span>
        <span class="nt">ceil</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-7</span>  <span class="c1"># this one have been overridden</span>
        <span class="nt">diffor</span><span class="p">:</span>
            <span class="l l-Scalar l-Scalar-Plain">1.0e-4</span>  <span class="c1"># this one have been kept</span>
</code></pre></div>
<p>If this is not the behavior you need, you can use the &ldquo;hard reset marker&rdquo;.
Append <code>!</code> to the name of the specialization you want to override to completely
replace it. Let the <code>f2</code> tree be:</p>
<div class="highlight"><pre><span></span><code><span class="nt">f2</span><span class="p">:</span>
    <span class="nt">ResultsGS</span><span class="p">:</span>
        <span class="nt">convergence!</span><span class="p">:</span>
            <span class="nt">ceil</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-7</span>
</code></pre></div>
<p>and now the resulting tree for the fifth image of the first dataset is:</p>
<div class="highlight"><pre><span></span><code><span class="nt">ResultsGS</span><span class="p">:</span>
    <span class="nt">tol_abs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-6</span>
    <span class="nt">convergence</span><span class="p">:</span>  <span class="c1"># the whole convergence node have been overriden</span>
        <span class="nt">ceil</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-7</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Here again the <code>explore</code> shell could be of great help to know what is inherited
from the other trees and what is overridden.</p>
</div>
<h3 id="how-to-use-equation-and-callback">How to use equation and callback<a class="headerlink" href="#how-to-use-equation-and-callback" title="Permanent link">&para;</a></h3>
<p><strong>equation</strong> and <strong>callback</strong> are special constraints because their
actual effects are defined directly in the configuration file. They have been introduced to
increase the flexibility of the configuration file without having to change the python code.</p>
<p><strong>equation</strong> takes a string in input. This string will
be interpreted as a python expression that must return in a number. The
absolute value of this number will be compared to the value of the <code>tol_eq</code>
parameter and if <code>tol_eq</code> is greater the test will succeed. The expression can
also result in a numpy array. In this case, the returned value if the euclidean norm of the
array that will be compared to <code>tol_eq</code> value.
A minimal example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">EnergyTerms</span><span class="p">:</span>
    <span class="nt">tol_eq</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-6</span>
    <span class="nt">equation</span><span class="p">:</span> <span class="s">&#39;this[&quot;Etotal&quot;]</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">this[&quot;Total</span><span class="nv"> </span><span class="s">energy(eV)&quot;]/27.2114&#39;</span>
</code></pre></div>
<p><strong>equations</strong> works exactly the same but has a list of string as value. 
Each string is a different expression
that will be tested independently from the others. In both case the tested
object can be referred as <code>this</code> and the reference object can be referred as <code>ref</code>.</p>
<p><strong>callback</strong> requires a bit of python coding since it will invoke a method of the
structure. Suppose we have a tag <code>!AtomSpeeds</code> associated to a document and
a class <code>AtomSpeeds</code>. The <code>AtomSpeeds</code> class have a method <code>not_going_anywhere</code> that checks
that the atoms are not going to try to leave the box. We would like to
pass some kind of tolerance <code>d_min</code> the minimal distance atoms can approach
the border of the box. The signature of the method have to be
<code>not_going_anywhere(self, tested, d_min=DEFAULT_VALUE)</code> and should return
<code>True</code>, <code>False</code> or an instance of <code>FailDetail</code> (see <strong>Add a new constraint</strong>
for explanations about those). Note that <code>self</code> will be the reference
instance. We can then use it by with the following configuration:</p>
<div class="highlight"><pre><span></span><code><span class="nt">AtomSpeeds</span><span class="p">:</span>
    <span class="nt">callback</span><span class="p">:</span>
        <span class="nt">method</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">not_going_anywhere</span>
        <span class="nt">d_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0e-2</span>
</code></pre></div>
<h2 id="command-line-interface">Command line interface<a class="headerlink" href="#command-line-interface" title="Permanent link">&para;</a></h2>
<p>The <code>~abinit/tests/testtools.py</code> script provides a command line interface to facilitate 
the creation of new tests and the exploration of the YAML configuration file.
The syntax is:</p>
<div class="codehilite"><pre><span></span><code><span class="p">.</span><span class="o">/</span><span class="n">testtools</span><span class="p">.</span><span class="n">py</span><span class="w"> </span><span class="n">COMMAND</span><span class="w"> </span><span class="o">[</span><span class="n">options</span><span class="o">]</span><span class="w"></span>
</code></pre></div>

<p>Run the script without arguments to get the list of possible commands and use:</p>
<div class="codehilite"><pre><span></span><code><span class="o">./</span><span class="n">testtools</span><span class="o">.</span><span class="n">py</span> <span class="n">COMMAND</span> <span class="o">--</span><span class="n">help</span>
</code></pre></div>

<p>to display the options supported by <code>COMMAND</code>.
The list of available commands is:</p>
<dl>
<dt>fldiff</dt>
<dd>
<p>Interface to the <em>fldiff.py</em> module.
This command can be used to compare output and reference files without executing ABINIT.
It is also possible to specify the YAML configuration file with the <code>--yaml-conf</code> option so 
that one can employ the same parameters as those used by <em>runtests.py</em></p>
</dd>
<dt>explore</dt>
<dd>
<p>This command allows the user to <em>explore</em> and <em>validate</em> a YAML configuration file. 
It provides a shell like interface in which the user can explore
the tree defined by the configuration file and print the constraints. 
It also provides documentation about constraints and parameters via the <em>show</em> command.</p>
</dd>
</dl>
                
                  
                
              

<!-- 
Add dropdown button with toolbar (based on https://bootsnipp.com/snippets/featured/inbox-by-gmail)
and return to Top button (based on https://codepen.io/rdallaire/pen/apoyx)
-->
<div class="md-container">
  <div class="row">
    <div id="inbox">
      <div class="fab btn-group show-on-hover dropup">
        <div data-toggle="tooltip" data-placement="left" title="Menu" style="margin-left: 42px;">
          <button id="return-to-top" type="button" class="btn btn-primary btn-io dropdown-toggle" data-toggle="dropdown">
            <span class="fa-stack fa-2x">
               <i class="fa fa-circle fa-stack-2x fab-backdrop"></i>
               <i class="fa fa-chevron-up fa-stack-1x fa-inverse fab-primary"></i>
               <i class="fa fa-map-signs fa-stack-1x fa-inverse fab-secondary"></i>
            </span>
          </button>
        </div>
        <ul class="dropdown-menu dropdown-menu-right" role="menu">
        
        
          <li>
            <a href="https://docs.abinit.org/about/release-notes/" 
               data-toggle="popover" data-tippy-content="About">
               <i class="fa fa-info-circle"></i>
            </a>
          </li>
        
          <li>
            <a href="https://docs.abinit.org/developers/git_and_gitlab/" 
               data-toggle="popover" data-tippy-content="Developers">
               <i class="fa fa-terminal"></i>
            </a>
          </li>
        
          <li>
            <a href="https://docs.abinit.org/theory/geometry/" 
               data-toggle="popover" data-tippy-content="Theory">
               <i class="fa fa-book"></i>
            </a>
          </li>
        
          <li>
            <a href="https://docs.abinit.org/faq/configuration_and_compilation/" 
               data-toggle="popover" data-tippy-content="FAQ">
               <i class="fa fa-graduation-cap"></i>
            </a>
          </li>
        
          <li>
            <a href="https://docs.abinit.org/tutorial/" 
               data-toggle="popover" data-tippy-content="Tutorials">
               <i class="fa fa-file-text-o"></i>
            </a>
          </li>
        
          <li>
            <a href="https://docs.abinit.org/variables/" 
               data-toggle="popover" data-tippy-content="Variables">
               <i class="fa fa-question"></i>
            </a>
          </li>
        
          <li>
            <a href="https://docs.abinit.org/topics/features/" 
               data-toggle="popover" data-tippy-content="Topics">
               <i class="fa fa-user-circle-o"></i>
            </a>
          </li>
        
          <li>
            <a href="https://docs.abinit.org/" 
               data-toggle="popover" data-tippy-content="User Guides">
               <i class="fa "></i>
            </a>
          </li>
        
        </ul>
      </div>
    </div>
  </div>
</div>

              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../testsuite_howto/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Test Suite Howto
            </div>
          </div>
        </a>
      
      
        <a href="../yaml_tools_api/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              YAML-based test suite Python tools and API
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
            <center>Abinit version 9.8.2</center>
        
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020-2021 The Abinit Group
            
            (TC, MG)
            
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/abinit/abinit" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.youtube.com/watch?v=gcbfb_Mteo4" target="_blank" rel="noopener" title="www.youtube.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="http://www.facebook.com/abinit.org" target="_blank" rel="noopener" title="www.facebook.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://twitter.com/hashtag/abinit" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "header.autohide"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../assets/javascripts/workers/search.fb4a9340.min.js", "version": "9.8.2"}</script>
    
    
      <script src="../../assets/javascripts/bundle.a1c7c35e.min.js"></script>
      
        <script src="../../extra_javascript/abidocs.js"></script>
      
    
  </body>
</html>